# 이커머스 프로젝트 API 명세서

---

## 1. 회원가입 (Register User)

| 항목           | 내용                                                                                                                                                                        |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `POST /register`                                                                                                                                                          |
| **설명**       | 새로운 사용자 회원가입                                                                                                                                                              |
| **요청 바디**    | `json<br>{<br>  "username": "string",<br>  "password": "string",<br>  "email": "string"<br>}<br>`<br>- `username`: 3\~20자<br>- `password`: 8자 이상<br>- `email`: 유효한 이메일 형식 |
| **응답**       | - **200 OK**<br>  `text<br>회원가입이 완료되었습니다.<br>`<br>- **400 Bad Request**<br>  - 유효성(validation) 실패 시 자동 리턴                                                                 |
| **인증**       | 불필요                                                                                                                                                                       |

---

## 2. 로그인 (Login User)

| 항목           | 내용                                                                                                                                  |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `POST /login`                                                                                                                       |
| **설명**       | 회원 로그인 후 JWT 토큰 발급                                                                                                                  |
| **요청 바디**    | `json<br>{<br>  "username": "string",<br>  "password": "string"<br>}<br>`                                                           |
| **응답**       | - **200 OK**<br>  `json<br>"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."`<br>  (JWT 토큰 문자열) <br>- **401 Unauthorized**<br>  - 인증 정보 불일치 |
| **인증**       | 불필요                                                                                                                                 |

---

## 3. 내 정보 조회 (Get My Profile)

| 항목           | 내용                                                                                                                                                                                       |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `GET /me`                                                                                                                                                                                |
| **설명**       | 인증된 사용자의 상세 정보 조회                                                                                                                                                                        |
| **요청 헤더**    | `Authorization: Bearer {JWT_TOKEN}`                                                                                                                                                      |
| **응답**       | - **200 OK**<br>  `json<br>{<br>  "id": 1,<br>  "username": "string",<br>  "email": "string",<br>  "roles": ["ROLE_USER"]<br>}<br>`<br>- **401 Unauthorized**<br>  - 토큰 없거나 만료/유효하지 않을 때 |
| **인증**       | JWT Bearer 토큰 필요                                                                                                                                                                         |

---

### DTO 스키마

#### UserRegisterRequest

| 필드         | 타입     | 제약조건                        | 설명      |
| ---------- | ------ | --------------------------- | ------- |
| `username` | String | `@NotBlank`, `@Size(3,20)`  | 사용자 아이디 |
| `password` | String | `@NotBlank`, `@Size(min=8)` | 비밀번호    |
| `email`    | String | `@NotBlank`, `@Email`       | 이메일     |

#### UserLoginRequest

| 필드         | 타입     | 제약조건        | 설명      |
| ---------- | ------ | ----------- | ------- |
| `username` | String | `@NotBlank` | 사용자 아이디 |
| `password` | String | `@NotBlank` | 비밀번호    |

---

### 응답 엔티티 (Entity)

#### User

| 필드         | 타입           | 설명                     |
| ---------- | ------------ | ---------------------- |
| `id`       | Long         | 사용자 고유번호               |
| `username` | String       | 사용자 아이디                |
| `email`    | String       | 이메일                    |
| `roles`    | List<String> | 사용자 권한(예: `ROLE_USER`) |

---

## 1. 전체 상품 조회 (Get All Products)

| 항목           | 내용                                                                                                                                                                                                                                                                                                                                                                                  |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `GET /`                                                                                                                                                                                                                                                                                                                                                                             |
| **설명**       | 등록된 모든 상품 목록을 조회                                                                                                                                                                                                                                                                                                                                                                    |
| **요청 파라미터**  | 없음                                                                                                                                                                                                                                                                                                                                                                                  |
| **요청 예시**    | `http<br>GET /api/products HTTP/1.1<br>Host: api.example.com<br>Accept: application/json`                                                                                                                                                                                                                                                                                           |
| **응답**       | - **200 OK**<br>  `json<br>[<br>  {<br>    "id": 1,<br>    "name": "Laptop",<br>    "description": "High-end gaming laptop",<br>    "price": 1500.00,<br>    "stock": 10<br>  },<br>  {<br>    "id": 2,<br>    "name": "Mouse",<br>    "description": "Wireless mouse",<br>    "price": 25.00,<br>    "stock": 50<br>  }<br>]`<br>- **204 No Content**<br>  - 상품이 하나도 없을 경우 (선택 구현) |
| **인증**       | 필요 없음                                                                                                                                                                                                                                                                                                                                                                               |

---

## 2. 단일 상품 조회 (Get Product by ID)

| 항목           | 내용                                                                                                                                                                                                           |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Endpoint** | `GET /{id}`                                                                                                                                                                                                  |
| **설명**       | ID에 해당하는 단일 상품 정보를 조회                                                                                                                                                                                        |
| **경로 변수**    | `id` (Long) — 조회할 상품의 고유번호                                                                                                                                                                                   |
| **요청 예시**    | `http<br>GET /api/products/1 HTTP/1.1<br>Host: api.example.com<br>Accept: application/json`                                                                                                                  |
| **응답**       | - **200 OK**<br>  `json<br>{<br>  "id": 1,<br>  "name": "Laptop",<br>  "description": "High-end gaming laptop",<br>  "price": 1500.00,<br>  "stock": 10<br>}`<br>- **404 Not Found**<br>  - 해당 ID의 상품이 없을 경우 |
| **인증**       | 필요 없음                                                                                                                                                                                                        |

---

### Entity 스키마

#### Product

| 필드            | 타입      | 설명                 |
| ------------- | ------- | ------------------ |
| `id`          | Long    | 상품 고유번호            |
| `name`        | String  | 상품명                |
| `description` | String  | 상품 설명              |
| `price`       | Double  | 상품 가격 (예: 1500.00) |
| `stock`       | Integer | 재고 수량              |

---

> **참고**:
>
> * 응답에는 `price`와 `stock` 등의 필드가 포함되며, 필요 시 추가 필드를 `Product` 엔티티에 정의하여 포함할 수 있습니다.

---

## 1. 상품 생성 (Create Product)

| 항목           | 내용                                                                                                                                                                                                                                       |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `POST /`                                                                                                                                                                                                                                 |
| **설명**       | 새로운 상품을 등록                                                                                                                                                                                                                               |
| **요청 헤더**    | `Authorization: Bearer {ADMIN_JWT_TOKEN}`                                                                                                                                                                                                |
| **요청 바디**    | `json<br>{<br>  "name": "string",<br>  "description": "string",<br>  "price": 0.0,<br>  "stock": 0<br>}<br>`<br>- `name`: 필수<br>- `description`: 선택<br>- `price`: 필수, 0 이상<br>- `stock`: 필수, 0 이상                                        |
| **응답**       | - **200 OK**<br>  `json<br>{<br>  "id": 1,<br>  "name": "string",<br>  "description": "string",<br>  "price": 0.0,<br>  "stock": 0<br>}<br>`<br>- **400 Bad Request**<br>  - 요청 검증 실패 시<br>- **401 Unauthorized**<br>  - 토큰 없거나 권한 불충분 시 |
| **인증/권한**    | 관리자 권한 필요                                                                                                                                                                                                                                |

---

## 2. 상품 수정 (Update Product)

| 항목           | 내용                                                                                                                                                                                                                                                                                      |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `PUT /{id}`                                                                                                                                                                                                                                                                             |
| **설명**       | ID에 해당하는 상품 정보를 수정                                                                                                                                                                                                                                                                      |
| **경로 변수**    | `id` (Long) — 수정할 상품의 고유번호                                                                                                                                                                                                                                                              |
| **요청 헤더**    | `Authorization: Bearer {ADMIN_JWT_TOKEN}`                                                                                                                                                                                                                                               |
| **요청 바디**    | `json<br>{<br>  "name": "string",<br>  "description": "string",<br>  "price": 0.0,<br>  "stock": 0<br>}<br>`                                                                                                                                                                            |
| **응답**       | - **200 OK**<br>  `json<br>{<br>  "id": 1,<br>  "name": "string",<br>  "description": "string",<br>  "price": 0.0,<br>  "stock": 0<br>}<br>`<br>- **400 Bad Request**<br>  - 요청 검증 실패 시<br>- **401 Unauthorized**<br>  - 토큰 없거나 권한 불충분 시<br>- **404 Not Found**<br>  - 해당 ID의 상품이 없을 경우 |
| **인증/권한**    | 관리자 권한 필요                                                                                                                                                                                                                                                                               |

---

## 3. 상품 삭제 (Delete Product)

| 항목           | 내용                                                                                                                                     |
| ------------ | -------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `DELETE /{id}`                                                                                                                         |
| **설명**       | ID에 해당하는 상품을 삭제                                                                                                                        |
| **경로 변수**    | `id` (Long) — 삭제할 상품의 고유번호                                                                                                             |
| **요청 헤더**    | `Authorization: Bearer {ADMIN_JWT_TOKEN}`                                                                                              |
| **응답**       | - **204 No Content**<br>  (성공 시 본문 없음)<br>- **401 Unauthorized**<br>  - 토큰 없거나 권한 불충분 시<br>- **404 Not Found**<br>  - 해당 ID의 상품이 없을 경우 |
| **인증/권한**    | 관리자 권한 필요                                                                                                                              |

---

### Entity 스키마

#### Product

| 필드            | 타입      | 설명                 |
| ------------- | ------- | ------------------ |
| `id`          | Long    | 상품 고유번호            |
| `name`        | String  | 상품명                |
| `description` | String  | 상품 설명              |
| `price`       | Double  | 상품 가격 (예: 1500.00) |
| `stock`       | Integer | 재고 수량              |

---

> **참고**:
>
> * 요청/응답 예시는 최소 필드만 기재하였으며, 필요 시 추가 필드를 `Product` 엔티티에 정의하여 포함할 수 있습니다.

---

## 1. 주문 생성 (Create Order)

| 항목           | 내용                                                                                                                                                                                                                                                                                                                |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `POST /`                                                                                                                                                                                                                                                                                                          |
| **설명**       | 인증된 사용자의 장바구니를 기반으로 새 주문을 생성하고 주문 정보를 반환                                                                                                                                                                                                                                                                          |
| **요청 헤더**    | `Authorization: Bearer {JWT_TOKEN}`                                                                                                                                                                                                                                                                               |
| **요청 바디**    | 없음                                                                                                                                                                                                                                                                                                                |
| **응답**       | - **200 OK**<br>  `json<br>{<br>  "id": 123,<br>  "userId": 45,<br>  "items": [<br>    { "productId": 1, "quantity": 2, "price": 1500.00 }<br>  ],<br>  "totalPrice": 3000.00,<br>  "status": "CREATED",<br>  "createdAt": "2025-05-29T10:15:30Z"<br>}<br>`<br>- **401 Unauthorized**<br>  - 인증 토큰 없거나 유효하지 않을 경우 |
| **권한**       | 사용자 인증 필요                                                                                                                                                                                                                                                                                                         |

---

## 2. 내 주문 목록 조회 (Get My Orders)

| 항목           | 내용                                                                                                                                                                                                                                  |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `GET /`                                                                                                                                                                                                                             |
| **설명**       | 인증된 사용자의 모든 주문 목록을 조회                                                                                                                                                                                                               |
| **요청 헤더**    | `Authorization: Bearer {JWT_TOKEN}`                                                                                                                                                                                                 |
| **응답**       | - **200 OK**<br>  `json<br>[<br>  { "id": 123, "totalPrice": 3000.00, "status": "CREATED", "createdAt": "..." },<br>  { "id": 124, "totalPrice":  750.00, "status": "SHIPPED", "createdAt": "..." }<br>]`<br>- **401 Unauthorized** |
| **권한**       | 사용자 인증 필요                                                                                                                                                                                                                           |

---

## 3. 주문 상세 조회 (Get Order Detail)

| 항목           | 내용                                                                                                                                                                                                                                                                                                                              |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `GET /{id}`                                                                                                                                                                                                                                                                                                                     |
| **설명**       | 인증된 사용자가 특정 주문의 상세 정보를 조회                                                                                                                                                                                                                                                                                                       |
| **경로 변수**    | `id` (Long) — 조회할 주문의 고유번호                                                                                                                                                                                                                                                                                                      |
| **요청 헤더**    | `Authorization: Bearer {JWT_TOKEN}`                                                                                                                                                                                                                                                                                             |
| **응답**       | - **200 OK**<br>  `json<br>{<br>  "id": 123,<br>  "userId": 45,<br>  "items": [...],<br>  "totalPrice": 3000.00,<br>  "status": "CREATED",<br>  "createdAt": "2025-05-29T10:15:30Z",<br>  "updatedAt": "2025-05-29T10:15:30Z"<br>}<br>`<br>- **401 Unauthorized**<br>- **404 Not Found**<br>  - 해당 ID 주문이 없거나 해당 사용자의 주문이 아닐 경우 |
| **권한**       | 사용자 인증 필요                                                                                                                                                                                                                                                                                                                       |

---

## 4. 주문 취소 (Cancel Order)

| 항목           | 내용                                                                                                                                                                                           |
| ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `PATCH /{id}/cancel`                                                                                                                                                                         |
| **설명**       | 인증된 사용자가 자신의 `CREATED` 상태 주문을 취소                                                                                                                                                             |
| **경로 변수**    | `id` (Long) — 취소할 주문의 고유번호                                                                                                                                                                   |
| **요청 헤더**    | `Authorization: Bearer {JWT_TOKEN}`                                                                                                                                                          |
| **요청 바디**    | 없음                                                                                                                                                                                           |
| **응답**       | - **200 OK**<br>  취소된 주문 객체(상태 `CANCELLED`) 반환                                    <br>- **400 Bad Request**<br>  - 이미 배송 중·완료된 주문을 취소하려 할 때<br>- **401 Unauthorized**<br>- **404 Not Found** |
| **권한**       | 사용자 인증 필요                                                                                                                                                                                    |

---

## 5. 배송 시작 (Start Shipping)

| 항목           | 내용                                                                                                                                                                                        |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `PATCH /{id}/ship`                                                                                                                                                                        |
| **설명**       | 관리자가 주문 상태를 `CREATED` → `SHIPPED` 로 변경                                                                                                                                                    |
| **경로 변수**    | `id` (Long) — 배송 시작 처리할 주문의 고유번호                                                                                                                                                          |
| **요청 헤더**    | `Authorization: Bearer {ADMIN_JWT_TOKEN}`                                                                                                                                                 |
| **요청 바디**    | 없음                                                                                                                                                                                        |
| **응답**       | - **200 OK**<br>  배송 시작된 주문 객체(상태 `SHIPPED`) 반환                                 <br>- **400 Bad Request**<br>  - 현재 상태가 `CREATED` 가 아닐 때<br>- **401 Unauthorized**<br>- **404 Not Found** |
| **권한**       | 관리자 인증 필요                                                                                                                                                                                 |

---

## 6. 배송 완료 (Complete Shipping)

| 항목           | 내용                                                                                                                                                                                      |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `PATCH /{id}/complete`                                                                                                                                                                  |
| **설명**       | 관리자가 주문 상태를 `SHIPPED` → `COMPLETED` 로 변경                                                                                                                                                |
| **경로 변수**    | `id` (Long) — 배송 완료 처리할 주문의 고유번호                                                                                                                                                        |
| **요청 헤더**    | `Authorization: Bearer {ADMIN_JWT_TOKEN}`                                                                                                                                               |
| **요청 바디**    | 없음                                                                                                                                                                                      |
| **응답**       | - **200 OK**<br>  배송 완료된 주문 객체(상태 `COMPLETED`) 반환                             <br>- **400 Bad Request**<br>  - 현재 상태가 `SHIPPED` 가 아닐 때<br>- **401 Unauthorized**<br>- **404 Not Found** |
| **권한**       | 관리자 인증 필요                                                                                                                                                                               |

---

### Entity 스키마

#### Order

| 필드           | 타입           | 설명                                                                            |
| ------------ | ------------ | ----------------------------------------------------------------------------- |
| `id`         | Long         | 주문 고유번호                                                                       |
| `userId`     | Long         | 주문자 사용자 고유번호                                                                  |
| `items`      | List\<Item>  | 주문 상품 목록<br>– `productId`: Long<br>– `quantity`: Integer<br>– `price`: Double |
| `totalPrice` | Double       | 주문 총 금액                                                                       |
| `status`     | String       | 주문 상태 (`CREATED`, `CANCELLED`, `SHIPPED`, `COMPLETED`)                        |
| `createdAt`  | String (ISO) | 주문 생성 시각 (UTC 기준 ISO 8601)                                                    |
| `updatedAt`  | String (ISO) | 마지막 상태 변경 시각                                                                  |

---

## 1. 주문 상태 변경 (Update Order Status)

| 항목           | 내용                                                                                                                                                                                                                                                                                                                                                                                                         |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `PATCH /{id}/status`                                                                                                                                                                                                                                                                                                                                                                                       |
| **설명**       | 특정 주문의 상태를 전달된 값으로 업데이트                                                                                                                                                                                                                                                                                                                                                                                    |
| **경로 변수**    | `id` (Long) — 상태를 변경할 주문의 고유번호                                                                                                                                                                                                                                                                                                                                                                             |
| **요청 헤더**    | `Authorization: Bearer {ADMIN_JWT_TOKEN}`                                                                                                                                                                                                                                                                                                                                                                  |
| **요청 바디**    | `json<br>{<br>  "status": "string"<br>}<br>`<br>- `status`: 변경할 주문 상태 (`CREATED`, `CANCELLED`, `SHIPPED`, `COMPLETED` 등)                                                                                                                                                                                                                                                                                   |
| **응답**       | - **200 OK**<br>  `json<br>{<br>  "id": 123,<br>  "userId": 45,<br>  "items": [...],<br>  "totalPrice": 3000.00,<br>  "status": "SHIPPED",<br>  "createdAt": "2025-05-29T10:15:30Z",<br>  "updatedAt": "2025-05-29T12:00:00Z"<br>}<br>`<br>- **400 Bad Request**<br>  - 허용되지 않은 상태 값이거나, 현재 상태에서 변경할 수 없는 경우<br>- **401 Unauthorized**<br>  - 토큰 없거나 권한 부족 시<br>- **404 Not Found**<br>  - 해당 ID 주문이 없을 경우 |
| **권한**       | `ROLE_ADMIN` 필요                                                                                                                                                                                                                                                                                                                                                                                            |

---

### DTO 스키마

#### UpdateOrderStatusRequest

| 필드       | 타입     | 제약조건        | 설명                                                              |
| -------- | ------ | ----------- | --------------------------------------------------------------- |
| `status` | String | `@NotBlank` | 변경할 주문 상태 코드 (`CREATED`, `CANCELLED`, `SHIPPED`, `COMPLETED` 등) |

---

### Entity 스키마

#### Order

| 필드           | 타입           | 설명                                                                            |
| ------------ | ------------ | ----------------------------------------------------------------------------- |
| `id`         | Long         | 주문 고유번호                                                                       |
| `userId`     | Long         | 주문자 사용자 고유번호                                                                  |
| `items`      | List\<Item>  | 주문 상품 목록<br>– `productId`: Long<br>– `quantity`: Integer<br>– `price`: Double |
| `totalPrice` | Double       | 주문 총 금액                                                                       |
| `status`     | String       | 주문 상태 (`CREATED`, `CANCELLED`, `SHIPPED`, `COMPLETED`)                        |
| `createdAt`  | String (ISO) | 주문 생성 시각 (UTC 기준 ISO 8601)                                                    |
| `updatedAt`  | String (ISO) | 마지막 상태 변경 시각                                                                  |

---

## 1. 장바구니에 상품 추가 (Add to Cart)

| 항목           | 내용                                                                                                                                                                                                                                                                                 |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `POST /`                                                                                                                                                                                                                                                                           |
| **설명**       | 인증된 사용자의 장바구니에 상품을 담고, 해당 `CartItem` 객체를 반환                                                                                                                                                                                                                                        |
| **요청 헤더**    | `Authorization: Bearer {JWT_TOKEN}`                                                                                                                                                                                                                                                |
| **요청 바디**    | `json<br>{<br>  "productId": 123,<br>  "quantity": 2<br>}<br>`<br>- `productId` (Long): 담을 상품 고유번호<br>- `quantity` (int): 담을 수량 (1 이상)                                                                                                                                             |
| **응답**       | - **200 OK**<br>  `json<br>{<br>  "id": 456,<br>  "productId": 123,<br>  "quantity": 2,<br>  "unitPrice": 1500.00,<br>  "totalPrice": 3000.00<br>}<br>`<br>- **400 Bad Request**<br>  - `productId`가 유효하지 않거나 수량이 1 미만일 때<br>- **401 Unauthorized**<br>  - 인증 토큰 없거나 만료/유효하지 않은 경우 |
| **권한**       | 사용자 인증 필요                                                                                                                                                                                                                                                                          |

---

## 2. 내 장바구니 조회 (Get My Cart)

| 항목           | 내용                                                                                                                                                                                                                                                                                                                                                  |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Endpoint** | `GET /`                                                                                                                                                                                                                                                                                                                                             |
| **설명**       | 인증된 사용자의 현재 장바구니 (`CartItem` 리스트) 를 조회                                                                                                                                                                                                                                                                                                              |
| **요청 헤더**    | `Authorization: Bearer {JWT_TOKEN}`                                                                                                                                                                                                                                                                                                                 |
| **응답**       | - **200 OK**<br>  `json<br>[<br>  {<br>    "id": 456,<br>    "productId": 123,<br>    "quantity": 2,<br>    "unitPrice": 1500.00,<br>    "totalPrice": 3000.00<br>  },<br>  {<br>    "id": 457,<br>    "productId": 124,<br>    "quantity": 1,<br>    "unitPrice":  750.00,<br>    "totalPrice":  750.00<br>  }<br>]<br>`<br>- **401 Unauthorized** |
| **권한**       | 사용자 인증 필요                                                                                                                                                                                                                                                                                                                                           |

---

### DTO 스키마

#### AddCartRequest

| 필드          | 타입   | 제약조건       | 설명                |
| ----------- | ---- | ---------- | ----------------- |
| `productId` | Long | `@NotNull` | 장바구니에 담을 상품의 고유번호 |
| `quantity`  | int  | `@Min(1)`  | 담을 수량 (1 이상)      |

---

### Entity 스키마

#### CartItem

| 필드           | 타입     | 설명                            |
| ------------ | ------ | ----------------------------- |
| `id`         | Long   | 장바구니 항목 고유번호                  |
| `productId`  | Long   | 담긴 상품의 고유번호                   |
| `quantity`   | int    | 담긴 수량                         |
| `unitPrice`  | Double | 해당 시점의 단가                     |
| `totalPrice` | Double | `unitPrice * quantity` 계산된 총액 |

---

## 1. 결제 요청 (Make Payment)

| 항목                       | 내용                                 |
| ------------------------ | ---------------------------------- |
| **Endpoint**             | `POST /`                           |
| **설명**                   | 클라이언트로부터 받은 결제 정보로 결제를 처리하고 결과를 반환 |
| **요청 헤더**                | `Content-Type: application/json`   |
| **요청 바디**                | \`\`\`json                         |
| {                        |                                    |
| "orderId": 123,          |                                    |
| "amount": 3000.00,       |                                    |
| "paymentMethod": "CARD", |                                    |
| "paymentDetails": {      |                                    |

```
"cardNumber": "4111111111111111",
"expiryMonth": "12",
"expiryYear": "2027",
"cvc": "123"
```

}
}

````
- `orderId` (Long, 필수): 결제할 주문의 고유번호  
- `amount` (Double, 필수): 결제 금액 (주문 총액과 일치해야 함)  
- `paymentMethod` (String, 필수): 결제 수단 코드 (`CARD`, `VIRTUAL_ACCOUNT`, `PAYPAL` 등)  
- `paymentDetails` (Object, 필수): 결제 수단별 상세 정보  
  - **신용카드 예시**  
    - `cardNumber` (String, 필수)  
    - `expiryMonth` (String, `MM` 형식, 필수)  
    - `expiryYear` (String, `YYYY` 형식, 필수)  
    - `cvc` (String, 필수)  

> **Note:** 다른 결제수단을 지원할 경우 `paymentDetails` 내 필드를 변경하거나 확장하세요.

| **응답**        | - **200 OK** (결제 성공)<br>  ```json
{
  "transactionId": "txn_abc123",
  "status": "SUCCESS",
  "orderId": 123,
  "amount": 3000.00,
  "paidAt": "2025-05-29T10:45:00Z",
  "message": "결제가 정상 처리되었습니다."
}
````

* **201 Created** 로도 구현 가능 <br>- **400 Bad Request** (결제 실패)<br>  \`\`\`json
  {
  "transactionId": null,
  "status": "FAILED",
  "orderId": 123,
  "amount": 3000.00,
  "paidAt": null,
  "message": "카드 정보가 유효하지 않습니다."
  }

```

| **인증/권한**   | 필요 시 JWT 토큰 (`Authorization: Bearer {JWT_TOKEN}`) 추가 후 인증된 사용자만 결제하도록 구현 가능                       |

---

### DTO 스키마

#### PaymentRequest

| 필드              | 타입     | 제약조건        | 설명                                                 |
|-----------------|--------|--------------|----------------------------------------------------|
| `orderId`       | Long   | `@NotNull`   | 결제할 주문의 고유번호                                      |
| `amount`        | Double | `@NotNull`   | 결제 금액 (주문 총액과 일치해야 함)                            |
| `paymentMethod` | String | `@NotBlank`  | 결제 수단 코드 (`CARD`, `VIRTUAL_ACCOUNT`, `PAYPAL` 등) |
| `paymentDetails`| Object | `@NotNull`   | 결제 수단별 상세 정보 (아래 `PaymentDetails` 참조)          |

##### PaymentDetails (신용카드 예시)

| 필드           | 타입   | 제약조건      | 설명                     |
|--------------|------|------------|------------------------|
| `cardNumber` | String | `@NotBlank` | 카드 번호 (16자리 등)        |
| `expiryMonth`| String | `@NotBlank` | 유효기간 월 (`MM`)          |
| `expiryYear` | String | `@NotBlank` | 유효기간 연도 (`YYYY`)       |
| `cvc`        | String | `@NotBlank` | 카드 CVC 코드              |

---

#### PaymentResponse

| 필드             | 타입     | 설명                             |
|----------------|--------|--------------------------------|
| `transactionId`| String | 결제 고유 트랜잭션 ID (실패 시 `null`)      |
| `status`       | String | 처리 결과 (`SUCCESS`, `FAILED`) |
| `orderId`      | Long   | 결제 대상 주문 ID                  |
| `amount`       | Double | 실제 처리된 결제 금액               |
| `paidAt`       | String | 결제 완료 시각 (ISO 8601, 실패 시 `null`) |
| `message`      | String | 결과에 대한 부가 설명               |

---

> **참고**  
> - 실제 운영 환경에서는 카드번호·CVC와 같은 민감정보는 프론트엔드에서 직접 PG사 SDK/토큰화 서비스를 이용하여 토큰만 서버로 전달하도록 설계필요.  
```

